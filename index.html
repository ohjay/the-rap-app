<!DOCTYPE html><html lang="en"><head> <link rel="icon" href="images/dragonhead.ico"> <title>The Rap App</title> <link rel="stylesheet" href="css/style.min.css"/> <link href='//fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'></head><body style="background-color: #000000"> <div id="mp3_player"> <div id="audio_box"></div><canvas id="analyzer_render"></canvas> </div><img id="drake" src="images/drake-black-background(newest).png" alt="Drake" height="270"/> <img id="cole" src="images/j-cole-black-background(new).png" alt="Cole" height="340"/> <img id="kanye" src="images/kanye-black-background.png" alt="Kanye" height="270"/> <img id="kendrick" src="images/kendrick-black-background(new).png" alt="Kendrick" height="255"/> <p> <span id="for-mobile"></span> <span id="directive">Hey, welcome to the Rap App! To play some sick beats, click START.</span> <div id="final-word">[ <i>Say something, please!</i> ]</div><div style="text-align: center"> <span id="typed"></span> </div></p><div id="start"> <button type="button">Start</button> </div><div id="mobi-drake"></div><div id="mobi-cole"></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script> <script>function beat(e){switch(e){case"Kendrick":$("#directive").text("If I'm gonna tell a real story, I'm gonna start with my name."),audio.src=audio.src.indexOf(moneyTreesMP3)>-1?freestyleMP3:moneyTreesMP3;break;case"Drake":$("#directive").text("My pain, you can experience through the rhyming, boy."),audio.src=audio.src.indexOf(backToBackMP3)>-1?freestyleMP3:backToBackMP3;break;case"Cole":$("#directive").text("This is my canvas... I'mma paint it how I want it, baby."),audio.src=audio.src.indexOf(slowMP3)>-1?freestyleMP3:slowMP3;break;case"Kanye":$("#directive").text("Who else you know been hot this long?"),audio.src=audio.src.indexOf(mediumMP3)>-1?freestyleMP3:mediumMP3;break;default:audio.src=freestyleMP3}audio.paused&&(audio.play(),startButton.innerHTML='<button type="button">Stop</button>')}function initMP3Player(){function e(){audio.paused?(++timesStarted>2?$("#directive").text("You know what to do, bro. Show 'em what you've got."):$("#directive").text("You best be spitting some savage lines right now."),audio.play(),startButton.innerHTML='<button type="button">Stop</button>'):($("#directive").text("What!? Don't be quitting on me, man."),audio.pause(),startButton.innerHTML='<button type="button">Start</button>')}startButton=document.getElementById("start"),startButton.addEventListener("click",e),context=new webkitAudioContext,analyser=context.createAnalyser(),canvas=document.getElementById("analyzer_render"),null!=canvas&&(ctx=canvas.getContext("2d"),source=context.createMediaElementSource(audio),source.connect(analyser),analyser.connect(context.destination),frameLooper())}function frameLooper(){window.webkitRequestAnimationFrame(frameLooper),fbc_array=new Uint8Array(analyser.frequencyBinCount),analyser.getByteFrequencyData(fbc_array),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillStyle="#00CCFF",bars=100;for(var e=0;bars>e;e++)bar_x=3*e,bar_width=2,bar_height=-(fbc_array[e]/2),ctx.fillRect(bar_x,canvas.height,bar_width,bar_height)}var freestyleMP3="rap_app_instrumentals/freestyle_rap.mp3",moneyTreesMP3="rap_app_instrumentals/money_trees.mp3",backToBackMP3="rap_app_instrumentals/back_to_back.mp3",slowMP3="rap_app_instrumentals/slow.mp3",mediumMP3="rap_app_instrumentals/medium.mp3",audio=new Audio;audio.src=freestyleMP3,audio.controls=!0,audio.loop=!0,audio.autoplay=!1;var canvas,ctx,source,context,analyser,fbc_array,bars,bar_x,bar_width,bar_height;window.addEventListener("load",initMP3Player,!1),$("#drake").click(function(){beat("Drake")}),$("#cole").click(function(){beat("Cole")}),$("#kanye").click(function(){beat("Kanye")}),$("#kendrick").click(function(){beat("Kendrick")});var timesStarted=0,generateMobileView=function(){$(window).width()<=1e3&&($("#drake").remove(),$("#cole").remove(),$("#mobi-drake").prepend('<img id="drake" src="images/drake-black-background(newest).png" alt="Drake" height="280"/>'),$("#mobi-cole").prepend('<img id="cole" src="images/j-cole-black-background(new).png" alt="Cole" height="340"/>'),$("#mobi-drake").click(function(){beat("Drake")}),$("#mobi-cole").click(function(){beat("Cole")}),$("#mp3_player").remove(),$("#for-mobile").html("<br><br><br><br><br><br><br><br><br><br><br>"),$("p").css({"font-size":"32px"}),$("#final-word").css({"font-size":"32px"}))};generateMobileView(),$(window).resize(function(){generateMobileView()});!function(t){"use strict";var s=function(s,e){this.el=t(s),this.options=t.extend({},t.fn.typed.defaults,e),this.isInput=this.el.is("input"),this.attr=this.options.attr,this.showCursor=this.isInput?!1:this.options.showCursor,this.elContent=this.attr?this.el.attr(this.attr):this.el.text(),this.contentType=this.options.contentType,this.typeSpeed=this.options.typeSpeed,this.startDelay=this.options.startDelay,this.backSpeed=this.options.backSpeed,this.backDelay=this.options.backDelay,this.stringsElement=this.options.stringsElement,this.strings=this.options.strings,this.strPos=0,this.arrayPos=0,this.stopNum=0,this.loop=this.options.loop,this.loopCount=this.options.loopCount,this.curLoop=0,this.stop=!1,this.cursorChar=this.options.cursorChar,this.shuffle=this.options.shuffle,this.sequence=[],this.build()};s.prototype={constructor:s,init:function(){var t=this;t.timeout=setTimeout(function(){for(var s=0;s<t.strings.length;++s)t.sequence[s]=s;t.shuffle&&(t.sequence=t.shuffleArray(t.sequence)),t.typewrite(t.strings[t.sequence[t.arrayPos]],t.strPos)},t.startDelay)},build:function(){var s=this;if(this.showCursor===!0&&(this.cursor=t('<span class="typed-cursor">'+this.cursorChar+"</span>"),this.el.after(this.cursor)),this.stringsElement){s.strings=[],this.stringsElement.hide();var e=this.stringsElement.find("p");t.each(e,function(e,i){s.strings.push(t(i).html())})}this.init()},typewrite:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.typeSpeed,i=this;i.timeout=setTimeout(function(){var e=0,r=t.substr(s);if("^"===r.charAt(0)){var o=1;/^\^\d+/.test(r)&&(r=/\d+/.exec(r)[0],o+=r.length,e=parseInt(r)),t=t.substring(0,s)+t.substring(s+o)}if("html"===i.contentType){var n=t.substr(s).charAt(0);if("<"===n||"&"===n){var a="",h="";for(h="<"===n?">":";";t.substr(s).charAt(0)!==h;)a+=t.substr(s).charAt(0),s++;s++,a+=h}}i.timeout=setTimeout(function(){if(s===t.length){if(i.options.onStringTyped(i.arrayPos),i.arrayPos===i.strings.length-1&&(i.options.callback(),i.curLoop++,i.loop===!1||i.curLoop===i.loopCount))return;i.timeout=setTimeout(function(){i.backspace(t,s)},i.backDelay)}else{0===s&&i.options.preStringTyped(i.arrayPos);var e=t.substr(0,s+1);i.attr?i.el.attr(i.attr,e):i.isInput?i.el.val(e):"html"===i.contentType?i.el.html(e):i.el.text(e),s++,i.typewrite(t,s)}},e)},e)}},backspace:function(t,s){if(this.stop!==!0){var e=Math.round(70*Math.random())+this.backSpeed,i=this;i.timeout=setTimeout(function(){if("html"===i.contentType&&">"===t.substr(s).charAt(0)){for(var e="";"<"!==t.substr(s).charAt(0);)e-=t.substr(s).charAt(0),s--;s--,e+="<"}var r=t.substr(0,s);i.attr?i.el.attr(i.attr,r):i.isInput?i.el.val(r):"html"===i.contentType?i.el.html(r):i.el.text(r),s>i.stopNum?(s--,i.backspace(t,s)):s<=i.stopNum&&(i.arrayPos++,i.arrayPos===i.strings.length?(i.arrayPos=0,i.shuffle&&(i.sequence=i.shuffleArray(i.sequence)),i.init()):i.typewrite(i.strings[i.sequence[i.arrayPos]],s))},e)}},shuffleArray:function(t){var s,e,i=t.length;if(i)for(;--i;)e=Math.floor(Math.random()*(i+1)),s=t[e],t[e]=t[i],t[i]=s;return t},reset:function(){var t=this;clearInterval(t.timeout);var s=this.el.attr("id");this.el.after('<span id="'+s+'"/>'),this.el.remove(),"undefined"!=typeof this.cursor&&this.cursor.remove(),t.options.resetCallback()}},t.fn.typed=function(e){return this.each(function(){var i=t(this),r=i.data("typed"),o="object"==typeof e&&e;r||i.data("typed",r=new s(this,o)),"string"==typeof e&&r[e]()})},t.fn.typed.defaults={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,shuffle:!1,backDelay:500,loop:!1,loopCount:!1,showCursor:!0,cursorChar:"|",attr:null,contentType:"html",callback:function(){},preStringTyped:function(){},onStringTyped:function(){},resetCallback:function(){}}}(window.jQuery);function Trie(){this.word=null;this.children={}}Trie.prototype={insert:function(a,b){if(0==a.length)this.word=b;else{var d=a[a.length-1];void 0===this.children[d]&&(this.children[d]=new Trie);a.pop();this.children[d].insert(a,b)}},getAllWords:function(){var a=[],b;null!=this.word&&a.push(this.word);for(b in this.children)a=a.concat(this.children[b].getAllWords());return a},getOneWord:function(){if(null!=this.word)return this.word;var a=null;for(c in this.children)if(a=this.children[c].getOneWord(),null!=a)break;return a},autoComplete:function(a){if(0==a.length)return this.getAllWords();child=this.children[a[a.length-1]];if(void 0===child)return[];if(1===a.length)return child.getAllWords();a.pop();return child.autoComplete(a)},getApproximation:function(a){child=this.children[a[a.length-1]];if(void 0===child)return this.getOneWord();a.pop();return child.getApproximation(a)}}; </script> <script src="js/mobypron.min.js"></script> <script>var mobytrie=new Trie,mobyword;for(mobyword in mobypron)if(mobypron.hasOwnProperty(mobyword)){var fields=mobypron[mobyword].split(/\/+/);mobytrie.insert(fields,mobyword)}for(var wordTrie=new Trie,words=Object.keys(mobypron),numWords=words.length,i=0;i<numWords;i++){var word=words[i];wordTrie.insert(word.split(""),word)}var fromTrie=function(a){4<a.length?a.splice(0,a.length-3):2<a.length&&a.splice(0,a.length-2);a=mobytrie.autoComplete(a);return 0==a.length?["grandfather clock"]:[a[Math.floor(Math.random()*a.length)]]},pluralFromTrie=function(a){a=fromTrie(a);a[0]=a[0].concat("s");return a},lookup=function(a){if("*"===a.slice(-1))switch(a){case "n****":return["gold digga"];case "f***":return["luck"];case "s***":return["hit"]}else{if(mobypron.hasOwnProperty(a))return fromTrie(mobypron[a].split(/\/+/));if(mobypron.hasOwnProperty(a.toLowerCase()))return fromTrie(mobypron[a.toLowerCase()].split(/\/+/));var c=a.substring(0,a.length-1);if("s"===a.slice(-1)&&mobypron.hasOwnProperty(c))return pluralFromTrie(mobypron[c].split(/\/+/));var b=wordTrie.getApproximation(a.toLowerCase().split(""));return null==b&&"s"===a.slice(-1)?(b=wordTrie.getApproximation(c.split("")),null==b?["grandmother clocks"]:pluralFromTrie(mobypron[b].split(/\/+/))):fromTrie(mobypron[b].split(/\/+/))}};var currentID=Number.MIN_SAFE_INTEGER,rhymes=["Just start rapping!^2500"],updated=!1,newTyped=function(e){$("#sos"+e).typed({strings:rhymes,typeSpeed:0,backDelay:500,callback:function(){updated?updated=!1:rhymes=["...^2000"],currentID+=1,currIDStr=currentID.toString(),document.getElementById("typed").innerHTML='<span id="sos'+currIDStr+'"></span>',newTyped(currIDStr)}})},newSpeechRecognition=function(){var e=new webkitSpeechRecognition;return e.onresult=function(n){if(n.results[n.results.length-1].isFinal){var t=n.results[n.results.length-1][0].transcript,r=t.substring(t.lastIndexOf(" ")+1);document.getElementById("final-word").innerHTML="[ Your previous line: <i>"+t+"</i> ]",rhymes=t.indexOf("Oliver")>-1?["Hi, Oliver. How goes it?^3000"]:t.indexOf("cigar")>-1?["Cigar? ...or SAGANG?^3000"]:["Rhymes: "+lookup(r).toString()+"^3000"],updated=!0,e.stop()}},e.onerror=function(e){$("#directive").text("[SPEECH RECOGNITION ERROR] : "+e.error)},e.onend=function(){recognition=newSpeechRecognition(),recognition.start()},e},recognition=newSpeechRecognition();recognition.start(),document.getElementById("typed").innerHTML='<span id="sos'+currentID.toString()+'"></span>',newTyped(currentID.toString()); </script></body></html>